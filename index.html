<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Slot</title>
    <link rel="stylesheet" href="styles.css">
    <script src="paho.javascript-1.0.3/paho-mqtt.js"></script>
<script>


    function startConnect(){
        client = new Paho.MQTT.Client("wss://mqttdashboard.com:8884/mqtt", "dfsakhfljkasfhlajalhflajksbc");
        client.onConnectionLost = onConnectionLost;
        client.onMessageArrived = onMessageArrived;
        
        client.connect({onSuccess:onConnect});

    }

    function onConnect() {
    console.log("onConnect");
    client.subscribe("rubetterthangoldfish/1");
    message = new Paho.MQTT.Message("Hello MQTT");
    message.destinationName = "rubetterthangoldfish/1";
    client.send(message);
    }

    function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
        console.log("onConnectionLost:"+responseObject.errorMessage);
    }
    }

    function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
    document.getElementById("messages").innerHTML += "<br> "+ message.payloadString + "";
    }
    function startDisconnect(){
        client.disconnect();
        console.log("Disconnect");
        document.getElementById("messages").innerHTML += "<br><span> Disconnected. </span>";
    }

    startConnect();

</script>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <a href="#main">Check Slot</a>
            <ul>
                <li><a href="./detail.html#about">About</a></li>
                <li><a href="./detail.html#code">Code</a></li>
                <li><a href="./detail.html#video">Video Demo</a></li>
                <li><a href="./detail.html#member">Member</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="container-main" id="#main">
            <div class="component" id="messages">Slot 1: </div>
        </section>
        
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Copyright. <a href="#">PhysicalProject.com</a></p>
    </footer>
</body>
</html>
